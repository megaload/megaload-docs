<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Escript API - Megaload</title>
  

  <link rel="shortcut icon" href="../img/favicon.ico">

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../css/highlight.css">
  <link href="../style.css" rel="stylesheet">

  
  <script>
    // Current page data
    var mkdocs_page_name = "Escript API";
  </script>
  
  <script src="../js/jquery-2.1.1.min.js"></script>
  <script src="../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../js/highlight.pack.js"></script>
  <script src="../js/theme.js"></script> 

  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> Megaload</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        <ul class="current">
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="..">Overview</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../qs_full/">Quick start</a>
        
    </li>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Using Megaload</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../use_dashboards/">The Megaload UI</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../use_load_testing/">Load testing</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../use_monitoring/">Monitoring</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Tests</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../test_write/">Writing a Megaload test</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../test_spec/">Test specification</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../examples/">Examples</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Test elements</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../protocols/">Protocols</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../actions/">Actions</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../assertions/">Assertions</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../counters/">Counters</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Actions</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../action_time/">Time</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../action_csv/">CSV handling</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../action_stat_counter/">Statistical counters</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../action_test_counter/">Test counters</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../action_generic_checks/">Generic checks</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../action_logical/">Logical operators</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../action_control/">Control structures</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../action_variable/">Variables</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../action_url/">URL handling</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../action_json/">JSON handling</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../action_string/">String handling</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../action_math/">Math</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Escript</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../escript_test_spec/">Escript test specification</a>
        
    </li>

        
            
    <li class="toctree-l1 current">
        <a class="current" href="./">Escript API</a>
        
            <ul>
            
                <li class="toctree-l3"><a href="#megaload-escript-api">Megaload Escript API</a></li>
                
                    <li><a class="toctree-l4" href="#loader_requests">loader_requests</a></li>
                
                    <li><a class="toctree-l4" href="#loader_metrics">loader_metrics</a></li>
                
            
            </ul>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>API</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../rest_api_intro/">Introduction</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../rest_api_error/">Errors</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../rest_api_runner/">Runner</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../rest_api_configuration/">Upload configuration</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../rest_api_escript/">Escript handling</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../rest_api_reporting/">Reporting</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../resources/">Additional resources</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../about/">About</a>
        
    </li>
<li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">Megaload</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
        
          <li>Escript &raquo;</li>
        
      
    
    <li>Escript API</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="megaload-escript-api">Megaload Escript API</h1>
<p>The Erlang API described in this chapter provides the functionality required by Erlang scripts to create or update metrics inside Megaload.</p>
<h2 id="loader_requests">loader_requests</h2>
<p>Erlang module</p>
<p>API for counting requests.<br />
A request is either invalid or valid - this can be determined before the sending the request to the system under test.<br />
A valid request is either successful or failed - this can be determined only after having sent the request to the system under test.</p>
<h3 id="exports">Exports</h3>
<ul>
<li>
<p><code>inc_failed() -&gt; term()</code><br />
  Increment counter of failed valid requests.</p>
</li>
<li>
<p><code>inc_invalid() -&gt; term()</code><br />
  Increment counter of invalid requests.</p>
</li>
<li>
<p><code>inc_successful() -&gt; term()</code><br />
  Increment counter of successful valid requests.</p>
</li>
</ul>
<h2 id="loader_metrics">loader_metrics</h2>
<p>Erlang module</p>
<p>This module is a generic API for loader metrics. The API is used by the loader and it is meant to be used by the plugins and escripts as well.</p>
<h3 id="data-types">Data types</h3>
<pre><code>name() = [binary()]
option() = {highest_trackable_value, integer()} | {significant_figures, 1..5}
| {periodic, integer()} | {external, name()} | {uniform, name()}
options() = [option()]
</code></pre>

<h3 id="exports_1">Exports</h3>
<ul>
<li>
<p><code>new_counter(Name::name()) -&gt; ok</code><br />
  Creates a new counter.</p>
</li>
<li>
<p><code>new_extended_histogram(Name::name()) -&gt; ok</code><br />
  Creates a new Histogram, with associated test and phase histograms.</p>
</li>
<li>
<p><code>new_gauge(Name::name()) -&gt; ok</code><br />
  Creates a new gauge.</p>
</li>
<li>
<p><code>new_histogram(Name::name()) -&gt; ok</code><br />
  Creates a new Histogram with the default options.</p>
</li>
<li>
<p><code>new_histogram(Name::name(), Opts::options()) -&gt; ok</code><br />
  Creates a new Histogram of the given type with the given options.</p>
</li>
<li>
<p><code>update_counter(Name::name(), Value::integer()) -&gt; ok | {error, not_found}</code><br />
  Updates a counter with the specified value.</p>
</li>
<li>
<p><code>update_dyn_counter(Name::name(), Value::integer()) -&gt; ok</code><br />
  Updates a counter with the specified value. Creates the counter if it doesn't exist.</p>
</li>
<li>
<p><code>update_dyn_histogram_set(Name::name(), Value::number()) -&gt; ok</code><br />
  Modifies a histogram by adding a new value and creates two additional histograms: test and phase, used mainly in PBT. These last two histograms are of type uniform to provide totals for the test and phase respectively, while the basic histogram reflects actual values.<br />
  The phase histogram will be retrieved and reset at the end of each phase, so it always contains the values of the current phase.</p>
</li>
<li>
<p><code>update_gauge(Name::name(), Value::number()) -&gt; ok | {error, not_found}</code><br />
  Updates a gauge by the specified value.</p>
</li>
<li>
<p><code>update_histogram(Name::name(), Value::number()) -&gt; ok | {error, not_found}</code><br />
  Modifies a Histogram by adding a new value.</p>
</li>
</ul>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../rest_api_intro/" class="btn btn-neutral float-right" title="Introduction"/>Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../escript_test_spec/" class="btn btn-neutral" title="Escript test specification"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>

  </div>

<div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../escript_test_spec/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../rest_api_intro/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>

</body>
</html>
